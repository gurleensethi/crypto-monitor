(this["webpackJsonpcrypto-monitor"]=this["webpackJsonpcrypto-monitor"]||[]).push([[0],{133:function(t,e,s){t.exports={loading__text:"TextLoading_loading__text__1avi-",loading__dots:"TextLoading_loading__dots__1NLBE"}},136:function(t,e,s){t.exports={container:"WatchAssetList_container__34Q-I","watch-asset-list":"WatchAssetList_watch-asset-list__31dy9"}},211:function(t,e,s){},23:function(t,e,s){t.exports={back:"Asset_back__2wIB1","home-button":"Asset_home-button__2HMpG",asset:"Asset_asset__2BQSx",asset__id:"Asset_asset__id__1ROPK",asset__name:"Asset_asset__name__2FHJl",asset__price:"Asset_asset__price__1Z8vP",asset__details:"Asset_asset__details__2Kdns",asset__value:"Asset_asset__value__3Q7sf","price-history":"Asset_price-history__2qtIE","price-history__chart":"Asset_price-history__chart__3YfgS"}},372:function(t,e,s){"use strict";s.r(e);var a=s(80),c=s.n(a),n=(s(211),s(51)),r=s(20),i=s(65),o=s(382),d=s(66),l=s(108),u=s(27),j=s.n(u),h=s(61),_=s(109),b=s.n(_),p="watch_ids";function O(){return(O=Object(h.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",b.a.get("https://api.coincap.io/v2/assets").then((function(t){return t.data.data})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return x.apply(this,arguments)}function x(){return(x=Object(h.a)(j.a.mark((function t(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",b.a.get("https://api.coincap.io/v2/assets/".concat(e)).then((function(t){return t.data.data})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return v.apply(this,arguments)}function v(){return(v=Object(h.a)(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=window.localStorage.getItem(p)){t.next=3;break}return t.abrupt("return",{});case 3:return t.abrupt("return",JSON.parse(e));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=Object(h.a)(j.a.mark((function t(e){var s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:(s=t.sent)[e]=!0,window.localStorage.setItem(p,JSON.stringify(s));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=Object(h.a)(j.a.mark((function t(e){var s,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:s=t.sent,s[e],a=Object(d.a)(s,[e].map(l.a)),window.localStorage.setItem(p,JSON.stringify(a));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=Object(h.a)(j.a.mark((function t(e){var s,a=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.length>1&&void 0!==a[1]?a[1]:"m1",t.abrupt("return",b.a.get("https://api.coincap.io/v2/assets/".concat(e,"/history?interval=").concat(s)).then((function(t){return t.data.data})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var N=s(100),A=s(383),S=function(){var t=Object(N.b)(),e=Object(A.a)("watching_assets",(function(t){return function(t){return g.apply(this,arguments)}(t)}),{onSuccess:function(s,a){t.setQueryData("watching_assets",(function(t){if(t){t[a];return Object(d.a)(t,[a].map(l.a))}return{}})),t.invalidateQueries("watching_assets"),e.reset()}});return e},k=s(46),L=s.n(k),I=s(36),C=s(28),E=s(0),F=s(133),P=s.n(F),W=s(2),Q=function(t){var e=t.children,s=t.className,a=Object(d.a)(t,["children","className"]),c=Object(E.useState)(""),n=Object(C.a)(c,2),r=n[0],o=n[1],l=Object(E.useRef)(null);return Object(E.useEffect)((function(){return l.current=setInterval((function(){o((function(t){return t.length>=3?"":t+"."}))}),200),function(){l.current&&clearInterval(l.current)}}),[]),Object(W.jsxs)("div",Object(I.a)(Object(I.a)({className:Object(i.a)(P.a.loading__text,s)},a),{},{children:[e,Object(W.jsx)("span",{className:P.a.loading__dots,children:r})]}))},U=s(102),D=function(){var t=Object(N.b)(),e=Object(A.a)((function(t){return function(t){return w.apply(this,arguments)}(t)}),{onSuccess:function(s,a){t.setQueryData("watching_assets",(function(t){return Object(I.a)(Object(I.a)({},t),{},Object(U.a)({},a,!0))})),t.invalidateQueries("watching_assets"),e.reset()}});return e},H=function(){var t=Object(o.a)("assets",(function(){return function(){return O.apply(this,arguments)}()}),{refetchInterval:1500}),e=Object(o.a)("watching_assets",(function(){return f()})),s=D(),a=S();return t.isLoading?Object(W.jsx)(Q,{className:L.a.loading,children:"Loading Crypto Assets"}):t.isError?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{className:L.a.error__text,children:"Error fetching assets!"}),Object(W.jsx)("button",{className:"btn",onClick:function(){return t.refetch()},children:"Refetch"})]}):Object(W.jsx)("div",{children:t.data&&t.data.map((function(t){var c=e.data&&e.data[t.id];return Object(W.jsx)(n.b,{to:"/".concat(t.id),className:L.a.link,children:Object(W.jsxs)("div",{className:L.a["asset-item"],children:[Object(W.jsxs)("div",{children:[Object(W.jsx)("div",{className:L.a["asset-item__name"],children:t.name}),Object(W.jsx)("div",{className:L.a["asset-item__symbol"],children:t.symbol})]}),Object(W.jsx)("div",{className:L.a["asset-item__price"],children:Math.round(1e4*Number(t.priceUsd))/1e4}),Object(W.jsx)("button",{className:Object(i.a)("btn",L.a["asset-item__watch"],c&&"btn--warning"),onClick:function(e){var n;e.preventDefault(),c?(n=t.id,a.isIdle&&a.mutate(n)):function(t){s.isIdle&&s.mutate(t)}(t.id)},children:c?"Unwatch":"Watch"})]},t.id)})}))})},M=s(76),R=s.n(M),T=function(t){var e=t.id,s=Object(r.f)(),a=Object(o.a)(["assets",e],(function(){return m(e)}),{refetchInterval:1500}),c=S();return Object(W.jsx)("div",{className:R.a["watch-asset"],onClick:function(){s.push("/".concat(e))},children:a.isLoading?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{className:R.a["watch-asset__id"],children:e}),Object(W.jsx)(Q,{children:"Loading"})]}):a.data&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("div",{children:[Object(W.jsx)("div",{className:R.a["watch-asset__name"],children:a.data.name}),Object(W.jsx)("div",{className:R.a["watch-asset__symbol"],children:a.data.symbol}),Object(W.jsx)("div",{className:R.a["watch-asset__price"],children:Math.round(1e4*Number(a.data.priceUsd))/1e4})]}),Object(W.jsx)("button",{className:"btn btn--warning",onClick:function(t){t.stopPropagation(),t.preventDefault(),c.mutate(e)},children:"Unwatch"})]})})},J=s(136),B=s.n(J),G=function(){var t=Object(o.a)("watching_assets",(function(){return f()}));return Object(W.jsxs)("div",{className:B.a.container,children:[Object(W.jsx)("h2",{children:"Watching Assets"}),t.isLoading||t.isFetching&&Object(W.jsx)(Q,{children:"Loading"}),t.data&&0===Object.keys(t.data).length&&Object(W.jsx)("div",{children:"You are not watching any crypto's, that is sad :("}),t.data&&Object(W.jsx)("div",{className:B.a["watch-asset-list"],children:Object.keys(t.data).map((function(t){return Object(W.jsx)(T,{id:t},t)}))})]})},K={showAssets:!1},X=function(t,e){switch(e.type){case"EXPAND_ASSETS":return Object(I.a)(Object(I.a)({},t),{},{showAssets:!0});case"COLLAPSE_ASSETS":return Object(I.a)(Object(I.a)({},t),{},{showAssets:!1});default:return t}},Y=Object(E.createContext)(null),q=function(t){var e=t.children,s=Object(E.useReducer)(X,K),a=Object(C.a)(s,2),c=a[0],n=a[1],r=Object(E.useMemo)((function(){return{state:c,dispatch:n}}),[c]);return Object(W.jsx)(Y.Provider,{value:r,children:e})},z=function(){var t=function(){var t=Object(E.useContext)(Y);if(!t)throw new Error("No GlobalUIContext.Provider found!");return t}();return Object(W.jsxs)("div",{children:[Object(W.jsx)("h1",{children:"Crypto Monitor"}),Object(W.jsxs)("p",{children:["React app built with ",Object(W.jsx)("strong",{children:"React Query"})," \u269b\ufe0f \ud83d\ude80 Read the code"," ",Object(W.jsx)("a",{href:"https://github.com/gurleensethi/crypto-monitor",target:"_blank",rel:"noreferrer",children:"here."})]}),Object(W.jsx)("br",{}),Object(W.jsx)(G,{}),Object(W.jsx)("button",{className:"btn",onClick:function(){t.state.showAssets?t.dispatch({type:"COLLAPSE_ASSETS"}):t.dispatch({type:"EXPAND_ASSETS"})},children:t.state.showAssets?"Hide All Assets":"Show All Assets"}),t.state.showAssets&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("h2",{children:"Assets"}),Object(W.jsx)(H,{})]})]})},Z=s(381),V=s(183),$=s(375),tt=s(376),et=s(199),st=s(200),at=s(91),ct=s(88),nt=s(202),rt=s(23),it=s.n(rt),ot=function(){var t,e=Object(r.g)().assetId,s=Object(o.a)(["assets",e],(function(){return m(e)}),{refetchInterval:1500}),a=Object(o.a)(["assets",e,"history"],(function(){return function(t){return y.apply(this,arguments)}(e)}),{enabled:!!(null===(t=s.data)||void 0===t?void 0:t.id),cacheTime:0});return s.isLoading?Object(W.jsx)(Q,{children:"Loading"}):s.isError?Object(W.jsxs)("div",{children:[Object(W.jsx)("div",{children:"Unable to get data from given asset :( Please try again later."}),Object(W.jsx)(n.b,{to:"/",children:Object(W.jsx)("button",{className:Object(i.a)("btn",it.a["home-button"]),children:"Go Home"})})]}):Object(W.jsxs)("div",{children:[Object(W.jsx)(n.b,{to:"/",className:it.a.back,children:"<< Home"}),s.data&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("div",{className:it.a.asset,children:[Object(W.jsxs)("div",{className:it.a.asset__id,children:["(",s.data.id,")"]}),Object(W.jsxs)("h1",{className:it.a.asset__name,children:[Object(W.jsx)("span",{className:"zoom-in-anim",style:{display:"inline-block"},children:"\ud83d\ude80"})," ",s.data.name]}),Object(W.jsx)("div",{className:it.a.asset__price,children:Number(s.data.priceUsd).toFixed(4)}),Object(W.jsxs)("div",{className:it.a.asset__details,children:[Object(W.jsxs)("div",{children:[Object(W.jsx)("h3",{className:it.a.asset__label,children:"\ud83e\udde2 Market Cap"}),Object(W.jsx)("p",{className:it.a.asset__value,children:Number(s.data.marketCapUsd).toFixed(4)})]}),Object(W.jsxs)("div",{children:[Object(W.jsx)("h3",{className:it.a.asset__label,children:"\ud83d\udcc8 Supply"}),Object(W.jsx)("p",{className:it.a.asset__value,children:Number(s.data.supply).toFixed(4)})]}),Object(W.jsxs)("div",{children:[Object(W.jsx)("h3",{className:it.a.asset__label,children:"\ud83d\udcc9 Max Supply"}),Object(W.jsx)("p",{className:it.a.asset__value,children:s.data.maxSupply?Number(s.data.maxSupply).toFixed(4):"N/A"})]}),Object(W.jsxs)("div",{children:[Object(W.jsx)("h3",{className:it.a.asset__label,children:"\u066a Change (24hr)"}),Object(W.jsx)("p",{className:it.a.asset__value,children:Number(s.data.changePercent24Hr).toFixed(4)})]})]})]}),Object(W.jsxs)("div",{className:it.a["price-history"],children:[Object(W.jsx)("h2",{children:"Price History"}),a.isLoading&&Object(W.jsx)(Q,{children:"Loading price history"}),a.data&&Object(W.jsx)($.a,{width:"100%",height:400,children:Object(W.jsxs)(tt.a,{className:it.a["price-history__chart"],data:a.data.map((function(t){return{price:Number(t.priceUsd),date:new Date(t.date).toDateString()}})),children:[Object(W.jsx)(et.a,{dataKey:"date"}),Object(W.jsx)(st.a,{domain:["dataMin"]}),Object(W.jsx)(at.a,{}),Object(W.jsx)(ct.a,{}),Object(W.jsx)(nt.a,{type:"basis",dataKey:"price",stroke:"coral",strokeWidth:1.5})]})})]})]})]})},dt=new Z.a({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}}),lt=function(){return Object(W.jsx)("div",{className:"App",children:Object(W.jsx)(q,{children:Object(W.jsxs)(N.a,{client:dt,children:[Object(W.jsx)(n.a,{basename:"/crypto-monitor",children:Object(W.jsxs)(r.c,{children:[Object(W.jsx)(r.a,{exact:!0,path:"/:assetId",component:ot}),Object(W.jsx)(r.a,{exact:!0,path:"/",component:z})]})}),Object(W.jsx)(V.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right"})]})})})};c.a.render(Object(W.jsx)(lt,{}),document.getElementById("root"))},46:function(t,e,s){t.exports={error__text:"AssetList_error__text__3OeHd",link:"AssetList_link__35vHp","asset-item":"AssetList_asset-item__2el6h","asset-item__name":"AssetList_asset-item__name__1ua-v","asset-item__symbol":"AssetList_asset-item__symbol__wkPal","asset-item__price":"AssetList_asset-item__price__6fM0n"}},76:function(t,e,s){t.exports={"watch-asset":"WatchAsset_watch-asset__1YvnG","watch-asset__id":"WatchAsset_watch-asset__id__2k4SC","watch-asset__name":"WatchAsset_watch-asset__name__2Fysy","watch-asset__symbol":"WatchAsset_watch-asset__symbol__3XQ5u","watch-asset__price":"WatchAsset_watch-asset__price__2o3UR"}}},[[372,1,2]]]);
//# sourceMappingURL=main.8dc0744f.chunk.js.map